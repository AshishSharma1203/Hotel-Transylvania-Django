{% extends 'base.html' %}
{% load static %}
{% block body %}
<div class="mt-3 flex flex-col items-center">
    <div class="photo mx-auto">

        {% if acc.profile_pic and acc.profile_pic.url %}
        <img src="{{acc.profile_pic.url}}" alt="profile" id="profile_pic" class="w-32 h-32 rounded-full border-4">
        {% else %}
        {% if accc.role == 'Human' %}
        <img src="{% static 'images/default_human.png' %}" alt="Human" id="profile_pic"
            class="w-32 h-32 rounded-full border-4">
        {% else %}
        <img src="{% static 'images/default_monster.png' %}" alt="Monster" id="profile_pic"
            class="w-32 h-32 rounded-full border-4">
        {% endif %}

        {% endif %}
    </div>

    <p class="edit_photo text-center hover:underline cursor-pointer">Edit Photo</p>
    <!--enctype="multipart/form-data" is used when we upload files/images so that browser send it in binary form -->
    <form action="{% url 'Accounts:edit_photo' %}" enctype="multipart/form-data" method="post"
        class="input_photo hidden">
        {% csrf_token %}
        <input name="profile_photo" type="file" accept=".jpg, .jpeg, .png, .">
        <button type="submit" class="rounded-sm border border-blue-500 px-1 ">Upload</button><br>
        <p class="text-red-600 text-xs">*Image should be in .jpg, .jpeg or .png format.</p>
    </form>
    <div class="m-2 name text-center text-4xl text-purple-900 font-bold">{{acc.first_name}}
        {{acc.last_name}}
    </div>
</div>

<hr class="my-2 h-5">

<div class="details text-xl flex flex-col items-center">
    <h2 class="text-center text-2xl font-bold underline-offset-1 underline">Personal Details</h2>
    <div class="my-3">
        <span class="my-2 font-bold">Name: </span><span class="name">{{acc.first_name}} {{acc.last_name}}</span>
        <br>
        <span class="my-2 font-bold">Email: </span><span class="email">{{acc.email}}</span>
        <br>
        <span class="my-2 font-bold">Phone No.: </span><span class="contact">{{acc.phone_number}}</span>
        <br>
        <span class="my-2 font-bold">Role: </span><span class="role">{{acc.role}}</span>
    </div>
</div>

<div class="m-2 buttons flex justify-center">
    <button class="mx-5 p-2 font-bold text-white bg-blue-600 hover:bg-blue-500 rounded-md"><a
            href="{% url 'Accounts:logout' %} ">LogOut</a></button>
    <button class="mx-5 p-2 font-bold text-white bg-blue-600 hover:bg-blue-500 rounded-md"><a
            href="{% url 'Accounts:edit_profile' %} ">Edit Profile</a></button>
    <button class="mx-5 p-2 font-bold text-white bg-blue-600 hover:bg-blue-500 rounded-md"><a
            href="{% url 'Accounts:change_password' %}">Change Password</a></button>
    <button class="mx-5 p-2 font-bold text-white bg-red-600 hover:bg-red-500 rounded-md"><a
            href="{% url 'Accounts:delete_profile' %}">Delete Account</a></button>
</div>


<script>
    // for edit photo form
    edit_btn = document.querySelector(".edit_photo");
    input_btn = document.querySelector(".input_photo");

    edit_btn.addEventListener('click', function () {
        input_btn.classList.toggle('hidden');
    });

    // For default profile pic
    profile_pic = document.querySelector('#profile_pic');

    profile_pic.addEventListener('error', () => {
        profile_pic.src = k;
        profile_pic.alt = 'default';
    });

</script>

{% endblock body %}